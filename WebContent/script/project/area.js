var ftms = window.ftms || {};
ftms = {
    init:function(){
        ftms.theLinkage.init();
    },
    theLinkage:{
        data:[
            {
                "city": "\u5E7F\u5DDE",
                "areas": [
                    {
                        "area": "\u5929\u6CB3\u533A",
                        "dealers": [
                            "\u5E7F\u5DDE\u5E7F\u4FDD",
                            "\u5E7F\u5DDE\u6C99\u6CB3",
                            "\u5E7F\u5DDE\u5B97\u8FDC",
                            "\u5E7F\u5DDE\u65B0\u949C",
                            "\u5E7F\u5DDE\u5E7F\u535A"
                        ]
                    },
                    {
                        "area": "\u4ECE\u5316",
                        "dealers": [
                            "\u5E7F\u5DDE\u5E7F\u4FDD\u4ECE\u5316\u5206\u5E97"
                        ]
                    },
                    {
                        "area": "\u9EC4\u57D4\u533A",
                        "dealers": [
                            "\u5E7F\u5DDE\u9F99\u7684"
                        ]
                    },
                    {
                        "area": "\u756A\u79BA\u533A",
                        "dealers": [
                            "\u5E7F\u5DDE\u8FCE\u5BBE",
                            "\u5E7F\u5DDE\u6C38\u4F73"
                        ]
                    },
                    {
                        "area": "\u6D77\u73E0\u533A",
                        "dealers": [
                            "\u5E7F\u5DDE\u534E\u901A"
                        ]
                    },
                    {
                        "area": "\u767D\u4E91\u533A",
                        "dealers": [
                            "\u5E7F\u5DDE\u5E86\u4E30",
                            "\u5E7F\u5DDE\u5E86\u4E30\u4EBA\u548C\u5206\u5E97",
                            "\u5E7F\u5DDE\u987A\u534F",
                            "\u5E7F\u5DDE\u9A8F\u8F89"
                        ]
                    },
                    {
                        "area": "\u8354\u6E7E\u533A",
                        "dealers": [
                            "\u5E7F\u5DDE\u82B3\u6751"
                        ]
                    },
                    {
                        "area": "\u82B1\u90FD\u533A",
                        "dealers": [
                            "\u5E7F\u5DDE\u5357\u83F1",
                            "\u5E7F\u5DDE\u5357\u83F1\u96C5\u7476\u5206\u5E97"
                        ]
                    },
                    {
                        "area": "\u589E\u57CE\u533A",
                        "dealers": [
                            "\u5E7F\u5DDE\u4E2D\u5347",
                            "\u5E7F\u5DDE\u5146\u65B9"
                        ]
                    }
                ]
            },
            {
                "city": "\u6DF1\u5733",
                "areas": [
                    {
                        "area": "\u798F\u7530\u533A",
                        "dealers": [
                            "\u6DF1\u5733\u5357\u65B9",
                            "\u6DF1\u5733\u9A8F\u7235"
                        ]
                    },
                    {
                        "area": "\u7F57\u6E56\u533A",
                        "dealers": [
                            "\u6DF1\u5733\u5927\u5174",
                            "\u6DF1\u5733\u534E\u65E5"
                        ]
                    },
                    {
                        "area": "\u76D0\u7530\u533A",
                        "dealers": [
                            "\u6DF1\u5733\u534E\u65E5\u76D0\u7530\u5206\u5E97"
                        ]
                    },
                    {
                        "area": "\u5357\u5C71\u533A",
                        "dealers": [
                            "\u6DF1\u5733\u6DF1\u4E1A",
                            "\u6DF1\u5733\u5146\u65B9",
                            "\u6DF1\u5733\u6613\u8FBE"
                        ]
                    },
                    {
                        "area": "\u9F99\u5C97\u533A",
                        "dealers": [
                            "\u6DF1\u5733\u90FD\u901A",
                            "\u6DF1\u5733\u7EA2\u5F64",
                            "\u6DF1\u5733\u5927\u5174\u5357\u6E7E\u5206\u5E97"
                        ]
                    },
                    {
                        "area": "\u576A\u5C71\u65B0\u533A",
                        "dealers": [
                            "\u6DF1\u5733\u90FD\u901A\u576A\u5C71\u5206\u5E97"
                        ]
                    },
                    {
                        "area": "\u5B9D\u5B89\u533A",
                        "dealers": [
                            "\u6DF1\u5733\u4E2D\u5347",
                            "\u5B9D\u5B89\u5927\u5174",
                            "\u6DF1\u5733\u4E2D\u5347\u8FCE\u5BBE",
                            "\u6DF1\u5733\u6C11\u751F\u4E1C\u90FD",
                            "\u6DF1\u5733\u5927\u5174\u89C2\u6F9C",
                            "\u6DF1\u5733\u5174\u4E1A"
                        ]
                    }
                ]
            },
            {
                "city": "\u4E1C\u839E",
                "areas": [
                    {
                        "area": "\u539A\u8857\u9547",
                        "dealers": [
                            "\u4E1C\u839E\u6C38\u4F73"
                        ]
                    },
                    {
                        "area": "\u77F3\u6392\u9547",
                        "dealers": [
                            "\u4E1C\u839E\u6C38\u4F73\u77F3\u6392\u5206\u5E97"
                        ]
                    },
                    {
                        "area": "\u5357\u57CE\u533A",
                        "dealers": [
                            "\u4E1C\u839E\u5357\u57CE"
                        ]
                    },
                    {
                        "area": "\u5BEE\u6B65\u9547",
                        "dealers": [
                            "\u4E1C\u839E\u4E1C\u90E8"
                        ]
                    },
                    {
                        "area": "\u4E07\u6C5F\u533A",
                        "dealers": [
                            "\u4E1C\u839E\u9F99\u534E"
                        ]
                    },
                    {
                        "area": "\u864E\u95E8\u9547",
                        "dealers": [
                            "\u4E1C\u839E\u51EF\u6DA6"
                        ]
                    },
                    {
                        "area": "\u5E38\u5E73\u9547",
                        "dealers": [
                            "\u4E1C\u839E\u5929\u4E0B\u884C"
                        ]
                    },
                    {
                        "area": "\u5858\u53A6\u9547",
                        "dealers": [
                            "\u4E1C\u839E\u4E1C\u7F8E"
                        ]
                    },
                    {
                        "area": "\u51E4\u5C97\u9547",
                        "dealers": [
                            "\u4E1C\u839E\u4E1C\u7F8E\u51E4\u5C97\u5206\u5E97"
                        ]
                    },
                    {
                        "area": "\u957F\u5B89\u9547",
                        "dealers": [
                            "\u4E1C\u839E\u767E\u529B\u6052"
                        ]
                    },
                    {
                        "area": "\u4E1C\u57CE\u533A",
                        "dealers": [
                            "\u4E1C\u839E\u4E1C\u57CE"
                        ]
                    },
                    {
                        "area": "\u5927\u5CAD\u5C71\u9547",
                        "dealers": [
                            "\u4E1C\u839E\u5B89\u4FE1"
                        ]
                    }
                ]
            },
            {
                "city": "\u4F5B\u5C71",
                "areas": [
                    {
                        "area": "\u987A\u5FB7\u533A",
                        "dealers": [
                            "\u987A\u5FB7\u5408\u8BDA",
                            "\u4F5B\u5C71\u5E02\u9F99\u6C5F"
                        ]
                    },
                    {
                        "area": "\u987A\u5FB7",
                        "dealers": [
                            "\u4F5B\u5C71\u987A\u5FB7\u5408\u8BDA\u5BB9\u6842\u5206\u5E97"
                        ]
                    },
                    {
                        "area": "\u5357\u6D77\u533A\u897F\u6A35\u9547",
                        "dealers": [
                            "\u4F5B\u5C71\u9F99\u6C5F\u897F\u6A35\u5206\u5E97"
                        ]
                    },
                    {
                        "area": "\u4E09\u6C34\u533A",
                        "dealers": [
                            "\u4F5B\u5C71\u5E02\u4E09\u6C34"
                        ]
                    },
                    {
                        "area": "\u9AD8\u660E\u533A",
                        "dealers": [
                            "\u4F5B\u5C71\u9AD8\u660E\u5357\u83F1"
                        ]
                    },
                    {
                        "area": "\u5357\u6D77\u533A",
                        "dealers": [
                            "\u5357\u6D77\u6842\u57CE",
                            "\u5357\u6D77\u6842\u57CE\u9648\u6751\u5206\u5E97",
                            "\u4F5B\u5C71\u9A8F\u5B89",
                            "\u4F5B\u5C71\u5357\u6D77\u5408\u8BDA"
                        ]
                    },
                    {
                        "area": "\u5357\u6D77\u533A\u5927\u6CA5\u9547",
                        "dealers": [
                            "\u4F5B\u5C71\u9A8F\u5B89\u5927\u6CA5\u5206\u5E97",
                            "\u4F5B\u5C71\u5F3A\u52B2\u5927\u6CA5\u5206\u5E97"
                        ]
                    },
                    {
                        "area": "\u7985\u57CE\u533A",
                        "dealers": [
                            "\u4F5B\u5C71\u5F3A\u52B2"
                        ]
                    },
                    {
                        "area": "\u72EE\u5C71\u9547",
                        "dealers": [
                            "\u4F5B\u5C71\u4E09\u6C34\u72EE\u5C71\u5206\u5E97"
                        ]
                    }
                ]
            }
        ], init:function (){

            var _city = ftms.theLinkage.getData('city');
            $('.form [data-selector="city"]').html(_city);
            $('.form [data-selector="city"]').bind('change',function(){
                ftms.theLinkage.area();
            });
        },
        getData:function(dataType,currentCity,currentArea){
            if(dataType == 'city'){
                var _city = '<option value="0" selected="selected">选择省</option>';
                $.each(ftms.theLinkage.data,function(x,y){
                    _city += '<option value="'+y.city+'">'+y.city+'</option>';
                });
                return _city;
            }
            if(dataType == 'area'){
                var _area = '<option value="0" selected="selected">选择市</option>';
                $.each(ftms.theLinkage.data,function(x,y){
                    if(y.city == currentCity){
                        $.each(y.areas,function(_x,_y){
                            _area += '<option value="'+_y.area+'">'+_y.area+'</option>';
                        });
                        return false;
                    }
                });
                return _area;
            }
            if(dataType == 'dealer'){
                var _dealer = '<option value="0" selected="selected">请选择经销商</option>';
                $.each(ftms.theLinkage.data,function(x,y){
                    if(y.city == currentCity){
                        $.each(y.areas,function(_x,_y){
                            if(_y.area == currentArea){
                                $.each(_y.dealers,function(__x,__y){
                                    _dealer += '<option value="'+__y+'">'+__y+'</option>';
                                });
                                return false;
                            }
                        });
                        return false;
                    }
                });
                return _dealer;
            }
        },
        area:function(){
            var _city = $('.form [data-selector="city"]').val();
            var _area = ftms.theLinkage.getData('area',_city);
            $('.form [data-selector="area"]').html(_area);
            $('.form [data-selector="dealer"]').html('<option value="0" selected="selected">请选择经销商</option>');
            $('.form [data-selector="area"]').bind('change',function(){
                ftms.theLinkage.dealers();
            });
        },
        dealers:function(){
            var _city = $('.form [data-selector="city"]').val();
            var _area = $('.form [data-selector="area"]').val();
            var _dealers = ftms.theLinkage.getData('dealer',_city,_area);
            $('.form [data-selector="dealer"]').html(_dealers);
        }
    }
}

$(function(){
    ftms.init();
})